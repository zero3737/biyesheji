<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<link rel="stylesheet" type="text/css" href="css/initialize.css">
<link rel="stylesheet" type="text/css" href="css/second.css">
<link rel="stylesheet" href="./css/body.css">
<title>毕业设计第二个页面</title>
</head>

<body style="background-image:url(image/3.jpg);background-attachment: fixed;">
	<div id="all">
		<div id="header">
			<a name="c1"></a>
			<div id="nav">
				<ul>
					<li><a class="nav_li" href="index.html" title="首页">首页</a>
					</li>
					<li><a class="nav_li" href="second.html?name=春天与植物&number=1"
						title="春天与植物">春天与植物</a>
					</li>
					<li><a class="nav_li" href="second.html?name=夏天与植物&number=1"
						title="夏天与植物">夏天与植物</a>
					</li>
					<li><a class="nav_li" href="second.html?name=秋天与植物&number=1"
						title="秋天与植物">秋天与植物</a>
					</li>
					<li><a class="nav_li" href="second.html?name=冬天与植物&number=1"
						title="冬天与植物">冬天与植物</a>
					</li>
				</ul>
			</div>
			</a>
			<div id="header_bottom">
				<span id="header_bottom_title">
					<p id="header_bottom_title_a">加载中...</p> </span>
				<div id="sear">
					<form
						action="/biyesheji/graduateWork/Transition"
						method="GET">
						<span> <input type="text" id="sear_inputText"
							maxlength="20" placeholder="请输入植物名称" autocomplete="off"
							name="keyword"> </span> <span id="sear_span2"><input
							type="submit" value="搜 索" id="sear_submit">
						</span>
					</form>
				</div>
			</div>
		</div>
		<div id="main">
			<div id="main_left"></div>
			<div id="main_right">
				<div id="main_right_top">
					<div class="main_right_title">最近更新</div>
					<div class="main_right_range">
						<span class="main_right_span1">标题</span> <span
							class="main_right_span2">热度</span>
						<div class="main_right_range_div">
							<ul class="main_right_range_ul">								
							</ul>
						</div>
					</div>
				</div>
				<div id="main_right_center">
					<div class="main_right_title">推荐阅读</div>
					<div class="main_right_range">
						<span class="main_right_span1">标题</span> <span
							class="main_right_span2">热度</span>
						<div class="main_right_range_div">
							<ul class="main_right_range_ul">
							</ul>
						</div>
					</div>
				</div>
				<div id="main_right_bottom">
					<div class="main_right_title">本月排行</div>
					<div class="main_right_range">
						<span class="main_right_span1">标题</span> <span
							class="main_right_span2">热度</span>
						<div class="main_right_range_div">
							<ul class="main_right_range_ul">								
							</ul>
						</div>
					</div>
				</div>
			</div>
		</div>
		<div id="footer"></div>
	</div>
	<a href="#c1"><img src="image/top.png"
		style="width:40px;height: auto; right: 10px;bottom:10px; position: fixed;"
		title="返回顶部" />
	</a>
</body>
<script>
        var url = window.location.search;   
        var theRequest = new Object();   
        if (url.indexOf("?") != -1){
            var str = url.substr(1);   
            strs = str.split("&");   
            for(var i = 0; i < strs.length; i ++) {   
                theRequest[strs[i].split("=")[0]]=decodeURI(strs[i].split("=")[1]); 
                }
            }
        var tit=document.getElementById('header_bottom_title_a');
        if(theRequest["name"] == "春天与植物"){
            document.getElementsByClassName('nav_li')[1].style.background="#87CEFF";
            tit.innerHTML=document.getElementsByClassName('nav_li')[1].title;
            document.getElementById('header_bottom').style.backgroundImage="url('image/spring.jpg')";
        }else if(theRequest["name"] == "夏天与植物"){
            document.getElementsByClassName('nav_li')[2].style.background="#87CEFF";
            tit.innerHTML=document.getElementsByClassName('nav_li')[2].title;
            document.getElementById('header_bottom').style.backgroundImage="url('image/summer.jpg')";
        }else if(theRequest["name"] == "秋天与植物"){
            document.getElementsByClassName('nav_li')[3].style.background="#87CEFF";
            tit.innerHTML=document.getElementsByClassName('nav_li')[3].title;
            document.getElementById('header_bottom').style.backgroundImage="url('image/autumn.jpg')";
        }else if(theRequest["name"] == "冬天与植物"){
            document.getElementsByClassName('nav_li')[4].style.background="#87CEFF";
            tit.innerHTML=document.getElementsByClassName('nav_li')[4].title;
            document.getElementById('header_bottom').style.backgroundImage="url('image/winter.jpg')";
        } 
</script>
<script>        
var xmlhttp;
if (window.XMLHttpRequest)
{
    xmlhttp=new XMLHttpRequest();
}
else
{
    xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
}
xmlhttp.onreadystatechange=function()
{
    if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
        var dom=JSON.parse(xmlhttp.responseText);
        for(j = theRequest["number"] * 5 - 5, i = 0; i < 5;i++, j++){
        if(j >= dom.length)
            break;
        var div1=document.createElement('div');
        div1.className='main_left_div';
        document.getElementById('main_left').appendChild(div1);
    
        var div2=document.createElement('div');
        div2.className="main_left_img";
        document.getElementsByClassName('main_left_div')[i].appendChild(div2);
    
        var div3=document.createElement('div');
        div3.className="main_left_title";
        document.getElementsByClassName('main_left_div')[i].appendChild(div3);
    
        var div4=document.createElement('div');
        div4.className="main_left_passage";
        var txt=document.createTextNode(dom[j].neirong);
        div4.appendChild(txt);
        document.getElementsByClassName('main_left_div')[i].appendChild(div4);
    
        var a1=document.createElement('a');
        a1.className="a1";
        a1.href="#";
        a1.title="";
        document.getElementsByClassName('main_left_img')[i].appendChild(a1);
    
        var img1=document.createElement('img');
        img1.id="sss";
        img1.src=dom[j].image;
        img1.alt="未找到图片";
        document.getElementsByClassName('a1')[i].appendChild(img1);
    
        var a2=document.createElement('a');
        a2.className="main_left_title_a";
        a2.href="third.html?name="+ dom[j].biaoti + "&number=";
        if(theRequest["name"] == "春天与植物")
            a2.href += 1;
        else if(theRequest["name"] == "夏天与植物")
            a2.href += 2;
        else if(theRequest["name"] == "秋天与植物")
            a2.href += 3;
        else if(theRequest["name"] == "冬天与植物")
            a2.href += 4;
        a2.title="";
        var txt=document.createTextNode(dom[j].biaoti);
        a2.appendChild(txt);
        document.getElementsByClassName('main_left_title')[i].appendChild(a2);
    
        var span1=document.createElement('span');
        span1.className="main_left_titleSpan";
        var txt=document.createTextNode("浏览");
        span1.appendChild(txt);
        document.getElementsByClassName('main_left_title')[i].appendChild(span1);
        } 

        var div5=document.createElement('div');
        div5.className="page";
        document.getElementById('main_left').appendChild(div5);

        var span2=document.createElement('span');
        span2.className="span2";
        document.getElementsByClassName('page')[0].appendChild(span2);

        var a4=document.createElement('a');
        if(parseInt(theRequest["number"]) == 1)
            a4.href="second.html?name=" + theRequest["name"] + "&number=" + theRequest["number"]; 
        else
            a4.href="second.html?name=" + theRequest["name"] + "&number=" + (parseInt(theRequest["number"]) - 1);
        a4.className="towards";
        var txt=document.createTextNode('<<');
        a4.appendChild(txt);
        document.getElementsByClassName('span2')[0].appendChild(a4);

        var length1 = null;
        if(dom.length % 5)
            length1 = (dom.length / 5) + 1;
        else
            length1 = dom.length / 5;
        length1 = parseInt(length1);    
        for(i=1;i<=length1;i++){                 
            var a3=document.createElement('a');
            a3.href="second.html?name=" + theRequest["name"] + "&number=" + i;
            a3.className="changePage";
            var txt=document.createTextNode(i);
            a3.appendChild(txt);                           
            document.getElementsByClassName('page')[0].appendChild(a3);
        } 

        var span3=document.createElement('span');
        span3.className="span3";
        document.getElementsByClassName('page')[0].appendChild(span3);

        var a5=document.createElement('a');
        if(parseInt(theRequest["number"]) >= length1)
            a5.href="second.html?name=" + theRequest["name"] + "&number=" + length1;    
        else
            a5.href="second.html?name=" + theRequest["name"] + "&number=" + (parseInt(theRequest["number"]) + 1);
        a5.className="towards";
        a5.title="下一页";
        var txt=document.createTextNode('>>');
        a5.appendChild(txt);
        document.getElementsByClassName('span3')[0].appendChild(a5);                   
    }
}
        xmlhttp.open("POST","/biyesheji/ServletIndex",true);
        xmlhttp.setRequestHeader("Content-type","application/x-www-form-urlencoded");
        xmlhttp.send("name=" + theRequest["name"]);
</script>
<script>
    if(theRequest["name"]==null && theRequest["number"]==null)
        window.location.href="/biyesheji/graduateWork/index.html";
    var ajax =new XMLHttpRequest();
 	ajax.open("POST","/biyesheji/HotSort",true);
 	ajax.setRequestHeader("Content-type","application/x-www-form-urlencoded");
    ajax.send("number=7");
ajax.onreadystatechange=function()
{
   if (ajax.readyState==4 && ajax.status==200)
    {
    	 var dom=JSON.parse(ajax.responseText);
    	 var getdom = document.getElementsByClassName("main_right_range_ul");
    	 for(i=0;i<dom.length;i++){
    	 	var className = "main_right_num"+(i+1)+"";
    	 	if(i>=3){
    	 		className = "main_right_num";
    	 	}
    	 	getdom[1].innerHTML+="<li><span class='"+className+"'>"+(i+1)+"</span> <span class='main_right_ul_title'><a href='' name='reading' class='main_right_linkTitle' title='"+dom[i].biaoti+"'>"+dom[i].biaoti+"</a></span> <span class='main_right_update'>"+dom[i].hot+"</span></li>";

    	 }
                var linkTitle=document.getElementsByName('reading');
                for(i=0;i<dom.length;i++){
                linkTitle[i].href="third.html?name="+ dom[i].biaoti + "&number=";
                if(dom[i].jijie == "春天")
                    linkTitle[i].href += 1;
                else if(dom[i].jijie == "夏天")
                    linkTitle[i].href += 2;
                else if(dom[i].jijie == "秋天")
                    linkTitle[i].href += 3;
                else if(dom[i].jijie == "冬天")
                    linkTitle[i].href += 4;
             }
         for(i=0;i<dom.length;i++){
            var className = "main_right_num"+(i+1)+"";
            if(i>=3){
                className = "main_right_num";
            }
            getdom[2].innerHTML+="<li><span class='"+className+"'>"+(i+1)+"</span> <span class='main_right_ul_title'><a href='' name='array' class='main_right_linkTitle' title='"+dom[i].biaoti+"'>"+dom[i].biaoti+"</a></span> <span class='main_right_update'>"+dom[i].hot+"</span></li>";

         }
                var linkTitle=document.getElementsByName('array');
                for(i=0;i<dom.length;i++){
                linkTitle[i].href="third.html?name="+ dom[i].biaoti + "&number=";
                if(dom[i].jijie == "春天")
                    linkTitle[i].href += 1;
                else if(dom[i].jijie == "夏天")
                    linkTitle[i].href += 2;
                else if(dom[i].jijie == "秋天")
                    linkTitle[i].href += 3;
                else if(dom[i].jijie == "冬天")
                    linkTitle[i].href += 4;
             }

    }
}
</script>
<script>
    var ajaxUpdate =new XMLHttpRequest();
    ajaxUpdate.open("POST","/biyesheji/TimeSort",true);
    ajaxUpdate.setRequestHeader("Content-type","application/x-www-form-urlencoded");
    ajaxUpdate.send("number=7");
    ajaxUpdate.onreadystatechange=function()
    {
       if (ajaxUpdate.readyState==4 && ajaxUpdate.status==200)
        {
             var dom=JSON.parse(ajaxUpdate.responseText);
             var getdom = document.getElementsByClassName("main_right_range_ul");
             for(i=0;i<dom.length;i++){
                var className = "main_right_num"+(i+1)+"";
                if(i>=3){
                    className = "main_right_num";
                }
                getdom[0].innerHTML+="<li><span class='"+className+"'>"+(i+1)+"</span> <span class='main_right_ul_title'><a href='' name='update' class='main_right_linkTitle' title='"+dom[i].biaoti+"'>"+dom[i].biaoti+"</a></span> <span class='main_right_update'>"+dom[i].hot+"</span></li>";

             }
                var linkTitle=document.getElementsByName('update');
                for(i=0;i<dom.length;i++){
                linkTitle[i].href="third.html?name="+ dom[i].biaoti + "&number=";
                if(dom[i].jijie == "春天")
                    linkTitle[i].href += 1;
                else if(dom[i].jijie == "夏天")
                    linkTitle[i].href += 2;
                else if(dom[i].jijie == "秋天")
                    linkTitle[i].href += 3;
                else if(dom[i].jijie == "冬天")
                    linkTitle[i].href += 4;
             }
             
        }
    }
</script>
</html>